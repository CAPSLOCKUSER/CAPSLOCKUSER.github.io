{"version":3,"sources":["../../js/components/MediaHolder.js"],"names":[],"mappings":";;;;;;;;;;;;AAAA,OAAO,CACL,iBADK,EAEL,KAFK,EAGL,sBAHK,EAIL,yBAJK,EAKL,cALK,EAML,oBANK,EAOL,WAPK,EAQL,WARK,CAAP,EASG,UACD,UADC,QAGD,SAHC,EAID,YAJC,EAKD,KALC,uBASE;AAAA,MAPD,IAOC,QAPD,IAOC;AAAA,MAHD,cAGC,SAHD,cAGC;AAAA,MAFD,sBAEC,SAFD,sBAEC;AAAA,MADD,eACC,SADD,eACC;;AAAA,MAEG,WAFH;AAAA;;AAID,yBAAY,KAAZ,EAAmB;AAAA;;AAAA,iGACX,KADW;;AAAA,YAqBnB,aArBmB,GAqBH,YAAM;AACpB,aAAK,MAAK,KAAL,CAAW,GAAhB,EACG,IADH,CACQ,gBAAQ;AACZ,kBAAQ,GAAR,CAAY,cAAZ,EAA4B,KAAK,MAAjC;AACA,gBAAM,QAAN,CAAe,eAAe,IAAf,CAAf;AACD,SAJH,EAKG,KALH,CAKS,UAAC,KAAD,EAAW;AAChB,kBAAQ,KAAR,CAAc,mBAAd,EAAmC,KAAnC;AACA,uBAAa,WAAb,CAAyB,+BAAzB;AACD,SARH,EASG,IATH,CASQ,YAAM;AACV,qBAAW;AAAA,mBAAM,MAAK,aAAL,CAAmB,MAAK,KAAL,CAAW,GAA9B,CAAN;AAAA,WAAX,EAAqD,MAAK,KAAL,CAAW,eAAhE;AACD,SAXH;AAYD,OAlCkB;;AAEjB,YAAK,KAAL;AACE,cAAM,EADR;AAEE,gBAAQ,MAFV;AAGE,gBAAQ,IAHV;AAIE,uBAAe,KAJjB;AAKE,mBAAW,EALb;AAME,yBAAiB;AANnB,SAOK,uBAAuB,MAAM,QAA7B,CAPL;AAFiB;AAWlB;;AAfA;AAAA;AAAA,0CAiBmB;AAAA;;AAClB,cAAM,SAAN,CAAgB,YAAM;AACpB,iBAAK,QAAL,CAAc,MAAM,QAAN,EAAd;AACD,SAFD;;AAIA,aAAK,aAAL;AACD;AAvBA;AAAA;AAAA,+BAwCQ;AACP,eACE;AAAA;AAAA;AACE,0BAAC,SAAD,EAAe,KAAK,KAApB;AADF,SADF;AAKD;AA9CA;;AAAA;AAAA,IAEuB,WAAW,SAFlC;;AAiDH,SAAO,WAAP;AACD,CApED","file":"MediaHolder.js","sourcesContent":["define([\n  'lib/virtual-dom',\n  'api',\n  'components/MediaList',\n  'components/ErrorMessage',\n  'stores/store',\n  'actions/media-list',\n  'lib/utils',\n  'constants',\n], (\n  VirtualDom,\n  { poll },\n  MediaList,\n  ErrorMessage,\n  Store,\n  { addToMediaList },\n  { objectWithoutUndefined },\n  { DEFAULT_POLLING }\n) => {\n\n  class MediaHolder extends VirtualDom.Component {\n\n    constructor(props) {\n      super(props);\n      this.state = {\n        list: [],\n        filter: 'none',\n        sortBy: 'id',\n        sortDirection: 'asc',\n        watchlist: [],\n        pollingInterval: DEFAULT_POLLING,\n        ...objectWithoutUndefined(props.appState),\n      }\n    }\n\n    componentDidMount() {\n      Store.subscribe(() => {\n        this.setState(Store.getState());\n      });\n\n      this.pollMediaList();\n    }\n\n    pollMediaList = () => {\n      poll(this.props.url)\n        .then(list => {\n          console.log('ajax success', list.length);\n          Store.dispatch(addToMediaList(list));\n        })\n        .catch((error) => {\n          console.error('Error at polling:', error);\n          ErrorMessage.showMessage('Polling error. Will continue.');\n        })\n        .then(() => {\n          setTimeout(() => this.pollMediaList(this.props.url), this.state.pollingInterval);\n        });\n    };\n\n    render() {\n      return (\n        <div>\n          <MediaList {...this.state} />\n        </div>\n      );\n    }\n  }\n\n  return MediaHolder;\n});\n"]}